<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="8%20СТРУКТУРЫ%20ОБЪЕДИНЕНИЯ.files/filelist.xml">
<link rel=Edit-Time-Data href="8%20СТРУКТУРЫ%20ОБЪЕДИНЕНИЯ.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>8. Структуры, объединения и перечисления</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>user</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>user</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>1</o:TotalTime>
  <o:Created>2011-03-30T14:07:00Z</o:Created>
  <o:LastSaved>2011-03-30T14:07:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>2637</o:Words>
  <o:Characters>15033</o:Characters>
  <o:Lines>125</o:Lines>
  <o:Paragraphs>35</o:Paragraphs>
  <o:CharactersWithSpaces>17635</o:CharactersWithSpaces>
  <o:Version>11.5606</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-2147482993 6144 0 0 31 0;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-font-kerning:16.0pt;}
h2
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
p.H1, li.H1, div.H1
	{mso-style-name:_H1;
	mso-style-parent:"Заголовок 1";
	mso-style-link:"_H1 Знак";
	margin-top:18.0pt;
	margin-right:0cm;
	margin-bottom:18.0pt;
	margin-left:0cm;
	text-align:center;
	page-break-before:always;
	mso-pagination:no-line-numbers;
	mso-outline-level:1;
	font-size:20.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	text-transform:uppercase;
	font-weight:bold;
	mso-bidi-font-weight:normal;}
p.P, li.P, div.P
	{mso-style-name:_P;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:35.45pt;
	mso-pagination:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.Code
	{mso-style-name:_Code;
	mso-style-parent:"";
	mso-ansi-font-size:12.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Lucida Console";
	mso-ascii-font-family:"Lucida Console";
	mso-hansi-font-family:"Lucida Console";}
p.H2, li.H2, div.H2
	{mso-style-name:_H2;
	mso-style-parent:"Заголовок 2";
	margin-top:18.0pt;
	margin-right:0cm;
	margin-bottom:18.0pt;
	margin-left:0cm;
	text-align:center;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:2;
	mso-hyphenate:none;
	font-size:18.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	text-transform:uppercase;
	mso-ansi-language:EN-US;
	font-weight:bold;
	mso-bidi-font-weight:normal;}
p.IMG, li.IMG, div.IMG
	{mso-style-name:_IMG;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.H10
	{mso-style-name:"_H1 Знак";
	mso-style-locked:yes;
	mso-style-parent:"";
	mso-style-link:_H1;
	mso-ansi-font-size:20.0pt;
	mso-bidi-font-size:20.0pt;
	text-transform:uppercase;
	mso-ansi-language:RU;
	mso-fareast-language:RU;
	mso-bidi-language:AR-SA;
	font-weight:bold;
	mso-bidi-font-weight:normal;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:2.0cm 42.5pt 2.0cm 3.0cm;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:153225467;
	mso-list-type:hybrid;
	mso-list-template-ids:-1585818206 68747279 68747289 68747291 68747279 68747289 68747291 68747279 68747289 68747291;}
@list l0:level1
	{mso-level-tab-stop:71.45pt;
	mso-level-number-position:left;
	margin-left:71.45pt;
	text-indent:-18.0pt;}
@list l1
	{mso-list-id:993677762;
	mso-list-type:hybrid;
	mso-list-template-ids:-2078495208 68747279 68747289 68747291 68747279 68747289 68747291 68747279 68747289 68747291;}
@list l1:level1
	{mso-level-tab-stop:71.45pt;
	mso-level-number-position:left;
	margin-left:71.45pt;
	text-indent:-18.0pt;}
@list l2
	{mso-list-id:1172069913;
	mso-list-type:hybrid;
	mso-list-template-ids:959761108 68747279 68747289 68747291 68747279 68747289 68747291 68747279 68747289 68747291;}
@list l2:level1
	{mso-level-tab-stop:71.45pt;
	mso-level-number-position:left;
	margin-left:71.45pt;
	text-indent:-18.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Обычная таблица";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=RU style='tab-interval:35.4pt'>

<div class=Section1>

<p class=H1 style='mso-outline-level:2'><a name="_Toc266272280"></a><a
name="_Toc265340320"></a><a name="_Toc263373091"><span style='mso-bookmark:
_Toc265340320'><span style='mso-bookmark:_Toc266272280'>8. Структуры, объединения 
и перечисления</span></span></a></p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272281"></a><a
name="_Toc265340321"></a><a name="_Toc263373092"><span style='mso-bookmark:
_Toc265340321'><span style='mso-bookmark:_Toc266272281'><span style='mso-ansi-language:
RU'>8.1. Общие сведения</span></span></span></a><span style='mso-ansi-language:
RU'><o:p></o:p></span></p>

<p class=P><i style='mso-bidi-font-style:normal'>Структура</i> – это
совокупность переменных (возможно, различных типов), сгруппированных под одним
именем. При помощи структур удобно размещать связанные между собой элементы,
особенно в больших программах, поскольку во многих ситуациях они позволяют
сгруппировать связанные данные таким образом, что с ними можно обращаться, как
с единым целым, а не как с отдельными объектами.</p>

<p class=P>Рассмотрим типовую структуру на примере примитивной базы данных:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:59.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;height:14.0pt'>
  <td width=47 valign=top style='width:35.45pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  14.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>№ <span class=SpellE><span class=GramE>п</span></span>/<span
  class=SpellE>п</span><o:p></o:p></span></p>
  </td>
  <td width=132 valign=top style='width:99.25pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:14.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>Наименование<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>(</span><span lang=EN-US style='font-size:14.0pt;
  mso-ansi-language:EN-US'>name</span><span style='font-size:14.0pt'>)<o:p></o:p></span></p>
  </td>
  <td width=104 valign=top style='width:77.95pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:14.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>Стоимость<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>(</span><span lang=EN-US style='font-size:14.0pt;
  mso-ansi-language:EN-US'>cost</span><span style='font-size:14.0pt'>)<o:p></o:p></span></p>
  </td>
  <td width=113 valign=top style='width:3.0cm;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:14.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>Количество<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>(</span><span lang=EN-US style='font-size:14.0pt;
  mso-ansi-language:EN-US'>quant</span><span style='font-size:14.0pt'>)<o:p></o:p></span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:14.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>Примечание<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>(</span><span lang=EN-US style='font-size:14.0pt;
  mso-ansi-language:EN-US'>note</span><span style='font-size:14.0pt'>)<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes;height:42.35pt'>
  <td width=47 valign=top style='width:35.45pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:42.35pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>1<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>2<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>3<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>..<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>..<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>..<o:p></o:p></span></p>
  </td>
  <td width=132 valign=top style='width:99.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  42.35pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>генератор<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  </td>
  <td width=104 valign=top style='width:77.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  42.35pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>100,5<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  </td>
  <td width=113 valign=top style='width:3.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  42.35pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>10<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  42.35pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>частота 460 Гц<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:14.0pt'>…<o:p></o:p></span></p>
  </td>
 </tr>
</table>

</div>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Объявление структурной переменной состоит <span class=GramE>из</span>:</p>

<p class=P style='margin-left:71.45pt;text-indent:-18.0pt;mso-list:l1 level1 lfo1;
tab-stops:list 71.45pt'><![if !supportLists]><span style='mso-list:Ignore'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>задания
<i style='mso-bidi-font-style:normal'>шаблона структуры</i> или типа структуры</p>

<p class=P style='margin-left:71.45pt;text-indent:-18.0pt;mso-list:l1 level1 lfo1;
tab-stops:list 71.45pt'><![if !supportLists]><span style='mso-list:Ignore'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>собственно
объявления <i style='mso-bidi-font-style:normal'>структурной переменной</i>.</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Описание структуры начинается с ключевого слова <span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>s<i style='mso-bidi-font-style:normal'>truct</i></span></span>.
В нашем примере объявление шаблона имеет следующий вид:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> n;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> name[20];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>float</span> cost;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> quant;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> note[100];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>};<o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>После объявления структуры ставится точка с запятой, поскольку оно
(объявление) является оператором.</p>

<p class=P><span class=GramE><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-ansi-language:EN-US'>base</span></i></span> определяет
имя создаваемого таким образом типа структурной переменной; <i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>n</span>, </i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-ansi-language:EN-US'>name</span>, </i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-ansi-language:EN-US'>cost</span>,<span
style='mso-spacerun:yes'>  </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-ansi-language:EN-US'>quant</span>,<span
style='mso-spacerun:yes'>  </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-ansi-language:EN-US'>note</span> – список элементов
(члены, поля) структуры</i>, которые могут иметь любой основной тип, включая
тип других структурных переменных.</p>

<p class=P>Если структура описана внутри функции, то она будет видна только в
функции. Если вне функции, то шаблон будет доступен после объявления.
Структурный шаблон сообщает компилятору, какой вид должна иметь структурная
переменная, но сама структурная переменная не создаётся. Чтобы её создать,
необходимо её объявить:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>struct</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>base</span> m1;
// создание переменной m1 типа <span class=SpellE>base</span>.<o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Когда объявляется структурная переменная, компилятор автоматически
выделяет количество памяти, необходимое, чтобы разместить все её члены (рис.
5.1).</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=IMG><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600"
 o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f"
 stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1026" type="#_x0000_t75" style='width:449.25pt;
 height:135pt'>
 <v:imagedata src="8%20СТРУКТУРЫ%20ОБЪЕДИНЕНИЯ.files/image001.png" o:title="88"/>
</v:shape><![endif]--><![if !vml]><img width=599 height=180
src="8%20СТРУКТУРЫ%20ОБЪЕДИНЕНИЯ.files/image002.jpg" v:shapes="_x0000_i1026"><![endif]></p>

<p class=IMG><o:p>&nbsp;</o:p></p>

<p class=P align=center style='text-align:center;text-indent:0cm'>Рис. 5.1.
Расположение элементов структуры в памяти</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Объявление шаблона и одной (или нескольких) структурных переменных
можно объединить:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> n;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> name[20];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span><span class=GramE>float</span> cost;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> quant;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> note[100];<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span style='font-size:12.0pt'>}
m1, m2, m3;</span></span></span><span class=Code><span style='font-size:12.0pt'><o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Структурная переменная представляет собой переменную нового типа,
которая задана с помощью шаблона.</p>

<p class=P>Общий вид <i style='mso-bidi-font-style:normal'>объявления структуры</i>:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>struct</span></span></span><span
class=Code><span style='font-size:12.0pt'> [<span class=SpellE>имя_типа_структуры</span>]<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span><span class=SpellE>тип_имя</span> члена;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span><span class=SpellE>тип_имя</span> члена;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>.<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>.<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>.<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span><span class=SpellE>тип_имя</span> члена;<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span style='font-size:12.0pt'>}
[одна или более переменных-структур];</span></span></span><span class=Code><span
style='font-size:12.0pt'><o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Неявно структурная переменная выравнивается на границу байта. В
зависимости от опции <span lang=EN-US style='mso-ansi-language:EN-US'>IDE</span>
может быть задано <i style='mso-bidi-font-style:normal'>выравнивание на границу
байта или слова (2 байта). <o:p></o:p></i></p>

<p class=P>При выравнивании на границу байта данные могут начинаться как с
чётного, так и с нечётного адреса. </p>

<p class=P>Если задан режим выравнивания на границу байта, то размер всей
переменой равен сумме длин всех полей. Если задан режим выравнивания на границу
слова, то все <span class=SpellE>несимвольные</span> данные выравниваются по
чётным адресам, а все символьные (<span lang=EN-US style='mso-ansi-language:
EN-US'>char</span>) – по любым. </p>

<p class=P>Исходя из этого видно, что внутри переменной могут появиться
дополнительные байты для выравнивания на границу слова.</p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272282"></a><a
name="_Toc265340322"></a><a name="_Toc263373093"><span style='mso-bookmark:
_Toc265340322'><span style='mso-bookmark:_Toc266272282'><span style='mso-ansi-language:
RU'>8.2. Инициализация структурных переменных</span></span></span></a><span
style='mso-ansi-language:RU'><o:p></o:p></span></p>

<p class=P><i style='mso-bidi-font-style:normal'>Инициализацию структуры</i>
можно осуществить двумя способами. Можно при объявлении структуры
проинициализировать её элементы или произвести её инициализацию в <span
class=GramE>теле программы</span>. Вследствие того, что не всегда известны
данные, которые должна содержать структура, чаще используется второй способ. Пример
инициализации структурной переменной <span lang=EN-US style='mso-ansi-language:
EN-US'>m</span>1: </p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>struct</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>base</span> m1 =<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>           </span>{1, “генератор”, 100.5, 100,
“частота 460 Гц”};<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Инициализация структуры во время
объявления:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> n;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> name[20];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>float</span> cost;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> quant;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> note[100];<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span style='font-size:12.0pt'>}
m1 = {1, “генератор”, 1.2, 100, “сдан в ремонт”};</span></span></span><span
class=Code><span style='font-size:12.0pt'><o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Если используется несколько структурных переменных, то такой метод
их инициализации не удобен, поскольку занимает много места в листинге
программы. Для инициализации структурных переменных лучше использовать <i
style='mso-bidi-font-style:normal'>оператор точка (оператор доступа к членам
структуры).<o:p></o:p></i></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console"'>.</span><span
style='mso-spacerun:yes'>   </span>обращение к элементу структуры;</p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console"'>-&gt;</span>
обращение к элементу структуры через указатель на структуру;</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>В следующем выражении полю <span lang=EN-US style='mso-ansi-language:
EN-US'>n</span> уже объявленной ранее структурной переменной <span lang=EN-US
style='mso-ansi-language:EN-US'>m</span>1 присваивается значение 1:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>m1.n = 1;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>m1.name =
“генератор”; // неправильно, т.к. <span class=SpellE>name</span> – массив,<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                       </span>// т.е.
указатель-константа<o:p></o:p></span></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>strcpy</span></span></span><span
class=Code><span style='font-size:12.0pt'>(m1.name, “генератор”); // правильно<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>m1.cost = 1.2;<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Чтобы вывести на экран поле структуры
</span><span lang=EN-US style='mso-ansi-language:EN-US;mso-no-proof:yes'>n</span><span
style='mso-no-proof:yes'> нужно написать следующее выражение:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>printf</span></span></span><span
class=Code><span style='font-size:12.0pt'>(“%<span class=SpellE>d</span>”,
m1.n);<o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>В общем виде доступ к членам структуры с помощью <i
style='mso-bidi-font-style:normal'>оператора точка</i> выглядит так:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>имя_объекта<span
class=GramE>.и</span>мя_члена</span></span></span><span class=Code><span
style='font-size:12.0pt'><o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Структурные переменные можно присваивать друг другу. Для того, чтобы
присвоить данные, которые находятся в одной структуре другой структуре того же
типа, достаточно просто применить операцию присваивания. И необязательно делать
это для каждого члена в отдельности. Следующий пример проиллюстрирует это:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base m1, m2, m3;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>m1 = m2; //
присваиваем одну структуру другой<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>m1 = m2 = m3;<o:p></o:p></span></span></p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272283"></a><a
name="_Toc265340323"></a><a name="_Toc263373094"><span style='mso-bookmark:
_Toc265340323'><span style='mso-bookmark:_Toc266272283'><span style='mso-ansi-language:
RU'>8.3. Вложенные структуры</span></span></span></a><span style='mso-ansi-language:
RU'><o:p></o:p></span></p>

<p class=P>Совпадающие элементы двух структур могут быть объединены в третьей
структуре. Этот способ используется, например, когда в нескольких структурах
имеется несколько совпадающих полей. Такую структуру нужно определить только
один раз, а затем использовать как поле другой структуры. Если структура
является членом другой структуры, то такая структура называется <i
style='mso-bidi-font-style:normal'>вложенной. <o:p></o:p></i></p>

<p class=P>Допустим, имеется две структуры:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>struct</span></span></span><span
class=Code><span style='font-size:12.0pt'> base1<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> quant;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>float</span> cost;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> note[100];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>};<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></span></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'> base2<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> n;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>float</span> cost;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span></span></span><span
class=SpellE><span class=Code><span style='font-size:12.0pt'>char</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>note</span>[100];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>};<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Эти структуры содержат разные данные,
но имеют совпадающие поля (</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-no-proof:yes'>cost</span><span style='mso-no-proof:yes'> и </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-no-proof:yes'>note</span><span
style='mso-no-proof:yes'>), которые могут быть объединены в третью структуру. <o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base3<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>float</span> cost;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> note[100];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>};<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Следующим образом можно использовать
эту структуру как элемент другой структуры:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base1<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> quant;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>base3</span> thing;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>} m1;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></span></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base2<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> n;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span></span></span><span
class=Code><span style='font-size:12.0pt'>base3 <span class=SpellE>thing</span>;<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span style='font-size:12.0pt'>}
m2;</span></span></span><span class=Code><span style='font-size:12.0pt'><o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>В этом описании – 3 структуры, а в структурах <span lang=EN-US
style='mso-ansi-language:EN-US'>base</span>1 и <span lang=EN-US
style='mso-ansi-language:EN-US'>base</span>2 – по 2 элемента.</p>

<p class=P>Можно также присваивать значения элементам вложенной структуры при
помощи оператора точка, но при этом нужно использовать вложенность в операторе
точно так же, как и в самой структуре. Например, для присвоения полю <span
lang=EN-US style='mso-ansi-language:EN-US'>cost</span> 2-ой структуры значения
2.3 нужно записать следующее:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>m2.thing.cost = 2.3;<o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Аналогично - для присвоения полю <span lang=EN-US style='mso-ansi-language:
EN-US'>cost</span> 1-ой структуры значения 2.3 нужно записать следующее:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>m1.thing.cost = 2.3;<o:p></o:p></span></span></p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272284"></a><a
name="_Toc265340324"></a><a name="_Toc263373095"><span style='mso-bookmark:
_Toc265340324'><span style='mso-bookmark:_Toc266272284'><span style='mso-ansi-language:
RU'>8.4. Указатели на структуры</span></span></span></a><span style='mso-ansi-language:
RU'><o:p></o:p></span></p>

<p class=P><i style='mso-bidi-font-style:normal'>Указатель на структуру</i>
объявляется с помощью символа *, который ставится перед именем самой структуры.
Объявление:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>struct</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>base</span> *<span
class=SpellE>p</span>; // объявление указателя <span class=SpellE>p</span> на
данные типа <span class=SpellE>base</span><o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Указатели на структуры можно использовать, например, при передаче
структуры функции. Поскольку при выполнении вызова функции структура помещается
в стек, это требует затраты существенных ресурсов. Поэтому надо передавать не
саму структуру, а указатель на неё, поскольку, когда функции передаётся
указатель на структуру, то в стек попадает только адрес структуры, ресурсов
тратится меньше и вызов функции осуществляется быстрее. Также такой способ
позволяет изменять содержимое структуры, используемой в качестве аргумента.</p>

<p class=P>Для получения адреса структурной переменной перед её именем нужно
поставить <i style='mso-bidi-font-style:normal'>оператор &amp;</i>.</p>

<p class=P>Теперь, чтобы получить доступ к членам структуры нужно использовать <i
style='mso-bidi-font-style:normal'>оператор стрелка -&gt;</i><span
style='mso-bidi-font-style:italic'>. Альтернативный способ доступа –
использование </span><i style='mso-bidi-font-style:normal'>оператора точка<span
class=GramE> .</span></i><span style='mso-bidi-font-style:italic'> , однако до
этого необходимо <span class=SpellE>разыменовать</span> указатель на <span
style='mso-no-proof:yes'>структуру, т.е. </span></span><i style='mso-bidi-font-style:
normal'><span style='mso-no-proof:yes'>(*имя_указателя_на_структуру).имя_поля</span></i><span
style='mso-bidi-font-style:italic;mso-no-proof:yes'>.</span><span
style='mso-no-proof:yes'> Следующий пример</span> показывает, как получить
доступ к полям <span lang=EN-US style='mso-ansi-language:EN-US'>n</span> и <span
lang=EN-US style='mso-ansi-language:EN-US'>cost</span><span lang=EN-US> </span>структурной
переменной <span lang=EN-US style='mso-ansi-language:EN-US'>m</span>1 через
указатель *<span lang=EN-US style='mso-ansi-language:EN-US'>p</span>:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base m1, *p = &amp;m1;<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span lang=EN-US
style='font-size:12.0pt;mso-ansi-language:EN-US'>p</span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>-&gt;n
= 1;<span style='mso-spacerun:yes'>           </span>// </span></span><span
class=Code><span style='font-size:12.0pt'>Можно</span></span><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'> (*p).n = 1;<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span lang=EN-US
style='font-size:12.0pt;mso-ansi-language:EN-US'>p</span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>-&gt;cost
= 1.2;<span style='mso-spacerun:yes'>      </span>// </span></span><span
class=Code><span style='font-size:12.0pt'>Можно</span></span><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'> (*p).cost = 1.2;<o:p></o:p></span></span></p>

<p class=P><span lang=EN-US style='mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=P>Необходимо помнить, что <i style='mso-bidi-font-style:normal'>оператор
точка</i> используется при работе с самой структурой, а <i style='mso-bidi-font-style:
normal'>оператор стрелка</i> – при работе<span style='mso-spacerun:yes'> 
</span>с указателем на структуру.</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Выделение под структурную переменную динамической памяти:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>p = (<span class=SpellE>struct</span> base*) <span
class=SpellE><span class=GramE>malloc</span></span><span class=GramE>(</span><span
class=SpellE>sizeof</span>(<span class=SpellE>struct</span> base));<o:p></o:p></span></span></p>

<p class=P><span lang=EN-US style='mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>p</span></span>
будет содержать адрес младшего байта выделенного блока памяти, равного размеру
шаблона.</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>++<span
class=SpellE>p</span>-&gt;<span class=SpellE>cost</span>; // это выражение
увеличивает <span class=SpellE>cost</span> на 1,<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>           </span>// а не <span class=SpellE><span
class=GramE>р</span></span>, так как оно эквивалентно выражению<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>           </span>// ++(<span class=SpellE>p</span>-&gt;<span
class=SpellE>cost</span>);<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>(++<span
class=SpellE>p</span>)-&gt;<span class=SpellE>cost</span>; // сначала
увеличится <span class=SpellE>p</span> на 1 до доступа к <span class=SpellE>cost</span>,<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>             </span>// т. е. увеличится <span
class=SpellE>p</span> на <span class=SpellE>sizeof</span> тип<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>(<span class=SpellE>p++</span>)-&gt;<span
class=SpellE>cost</span>; // увеличивает <span class=SpellE>p</span> после
доступа к <span class=SpellE>cost</span><o:p></o:p></span></span></p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272285"></a><a
name="_Toc265340325"></a><a name="_Toc263373096"><span style='mso-bookmark:
_Toc265340325'><span style='mso-bookmark:_Toc266272285'><span style='mso-ansi-language:
RU'>8.5. Массивы структурных переменных</span></span></span></a><span
style='mso-ansi-language:RU'><o:p></o:p></span></p>

<p class=P>При объявлении <i style='mso-bidi-font-style:normal'>массива
структур</i> в квадратных скобках пишется количество резервируемых для
дальнейшего использования структур. Например, следующий код – создание 100
структур <span class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>mas</span></span>,
каждая из которых состоит из 5 элементов:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> n;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> name[20];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>float</span> cost;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> quant;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> note[100];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>};<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>struct</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>base</span> <span
class=SpellE>mas</span>[100]; // объявление массива структур<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                      </span>// типа <span
class=SpellE>base</span> из 100 элементов<o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Но нужно быть осторожным при использовании массивов структур,
поскольку они занимают много места в памяти.</p>

<p class=P><i style='mso-bidi-font-style:normal'>Оператор точка</i> работает с
элементами массива структур точно так же, как и с обычными структурными
переменными. </p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>mas</span></span></span><span
class=Code><span style='font-size:12.0pt'>[<span class=SpellE>i</span>].<span
class=SpellE>n</span> = 10; // полю <span class=SpellE>n</span> i-той структуры
присваивается<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>               </span>// значение 10 <o:p></o:p></span></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>mas</span></span></span><span
class=Code><span style='font-size:12.0pt'>[<span class=SpellE>i</span>].<span
class=SpellE>name</span>[<span class=SpellE>j</span>] = ‘<span class=SpellE>a</span>’;
// j-тому элементу поля <span class=SpellE>name</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                      </span>// i-той структуры<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                      </span>// присваивается значение
‘<span class=SpellE>a</span>’<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Можно использовать для присвоения
значений элементам массива указатель:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>p</span></span></span><span
class=Code><span style='font-size:12.0pt'> = &amp;<span class=SpellE>mas</span>[0];
// указателю <span class=SpellE>p</span> присваивается адрес<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>             </span>// первой структуры<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>(<span class=SpellE>p+i</span>)-&gt;<span
class=SpellE>n</span>;<span style='mso-spacerun:yes'>    </span>// обращение к
i-тому элементу, <span class=SpellE>i</span> увеличивается<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>             </span>// на <span class=SpellE>sizeof</span>(<span
class=SpellE>struct</span> <span class=SpellE>base</span>).<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Также одной операцией присваивания
можно присвоить одной структуре данные, находящиеся в другой структуре:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>mas</span></span></span><span
class=Code><span style='font-size:12.0pt'>[<span class=SpellE>i</span>] = <span
class=SpellE>mas</span>[<span class=SpellE>j</span>];<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Можно использовать указатель для
присвоения значений элементов массива друг другу:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>*(<span
class=SpellE>mas</span> + <span class=SpellE>i</span>) = *(<span class=SpellE>mas</span>
+ <span class=SpellE>j</span>);<o:p></o:p></span></span></p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272286"></a><a
name="_Toc265340326"></a><a name="_Toc263373097"><span style='mso-bookmark:
_Toc265340326'><span style='mso-bookmark:_Toc266272286'><span style='mso-ansi-language:
RU'>8.6. Передача функциям структурных переменных</span></span></span></a><span
style='mso-ansi-language:RU'><o:p></o:p></span></p>

<p class=P>В некоторых случаях приходится передавать функциям в качестве
параметров отдельные поля структур или даже структуры целиком. Язык Си
предоставляет программисту несколько способов решения этой задачи.</p>

<p class=P>Например, имеется следующая структура:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
base<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> n;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> name[20];<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>float</span> cost;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>int</span></span> quant;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>char</span> note[100];<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span style='font-size:12.0pt'>}
m1;</span></span></span><span class=Code><span style='font-size:12.0pt'><o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P style='text-indent:0cm'>и пусть <span lang=EN-US style='mso-ansi-language:
EN-US'>f</span>1(), <span lang=EN-US style='mso-ansi-language:EN-US'>f</span>2(),
<span lang=EN-US style='mso-ansi-language:EN-US'>f</span>3() – некоторые
функции. Тогда члены этой структуры передаются этим функциям следующим образом:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>f1(m1.n);<span
style='mso-spacerun:yes'>       </span>// функции f1 передаётся значение <span
class=SpellE>n</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>f2(m1.name);<span
style='mso-spacerun:yes'>    </span>// функции f1 передаётся адрес <span
class=SpellE>name</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>f3(m1.name[<span
class=SpellE>i</span>]); // функции f1 передаётся значение<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                </span>// i-того элемента в массиве <span
class=SpellE>name</span> <o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Чтобы передать адреса членов этой структуры функции, можно написать
следующее:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>f1(&amp;m1.n);<span
style='mso-spacerun:yes'>       </span>// функции f1 передаётся адрес <span
class=SpellE>n</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>f2(m1.name);<span
style='mso-spacerun:yes'>     </span>// функции f1 передаётся адрес <span
class=SpellE>name</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>f3(&amp;m1.name[<span
class=SpellE>i</span>]); // функции f1 передаётся адрес<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                 </span>// i-того элемента в массиве <span
class=SpellE>name</span><o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Для того чтобы использовать структурную переменную в качестве
аргумента функции (если не нужно изменять значения, находящиеся в ней), следует
использовать способ вызова по значению. Если же имеется необходимость в
изменении значений, надо передавать не саму структурную переменную, а указатель
на неё. </p>

<p class=P>Например, нужно умножить 2 числа, которые являются элементами
структуры. Это можно сделать несколькими способами:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P style='margin-left:71.45pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 71.45pt'><![if !supportLists]><i style='mso-bidi-font-style:
normal'><span style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></i><![endif]><i style='mso-bidi-font-style:normal'>Передать
функции в качестве параметров члены структуры:<o:p></o:p></i></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>mult</span><span style='font-size:
12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>(</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;
mso-no-proof:yes'>m</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>1.</span><span lang=EN-US style='font-size:12.0pt;font-family:
"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>cost</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>, </span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>m</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>1.</span><span lang=EN-US style='font-size:12.0pt;font-family:
"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>quant</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>); // функции
</span><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>mult</span><span style='font-size:
12.0pt;font-family:"Lucida Console";mso-no-proof:yes'> передаются<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'><span style='mso-spacerun:yes'>                     </span><span
style='mso-spacerun:yes'>    </span>// значения </span><span lang=EN-US
style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;
mso-no-proof:yes'>cost</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'> и </span><span lang=EN-US style='font-size:12.0pt;
font-family:"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>quant</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=P><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>...<o:p></o:p></span></p>

<p class=P><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>float mult(float cost, int quant) // </span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>объявление</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;
mso-no-proof:yes'> </span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>функции</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'> <span lang=EN-US>mult<o:p></o:p></span></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>{<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span></span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>return</span><span style='font-size:12.0pt;font-family:
"Lucida Console";mso-no-proof:yes'> (</span><span lang=EN-US style='font-size:
12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>cost</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'> * </span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>quant</span><span style='font-size:12.0pt;font-family:
"Lucida Console";mso-no-proof:yes'>); // выполняется само умножение<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>}<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P style='margin-left:71.45pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 71.45pt'><![if !supportLists]><i style='mso-bidi-font-style:
normal'><span style='mso-no-proof:yes'><span style='mso-list:Ignore'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></i><![endif]><i
style='mso-bidi-font-style:normal'><span style='mso-no-proof:yes'>Передать
функции в качестве параметра саму структуру: <o:p></o:p></span></i></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>mult</span><span style='font-size:
12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>(</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;
mso-no-proof:yes'>m</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>1); // функции </span><span lang=EN-US style='font-size:12.0pt;
font-family:"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>mult</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>
передаётся<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'><span style='mso-spacerun:yes'>          </span>// структурная
переменная </span><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>m</span><span style='font-size:12.0pt;
font-family:"Lucida Console";mso-no-proof:yes'>1<o:p></o:p></span></p>

<p class=P><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>...<o:p></o:p></span></p>

<p class=P><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>float mult(struct base m1) <span
style='mso-spacerun:yes'>    </span>// </span><span style='font-size:12.0pt;
font-family:"Lucida Console";mso-no-proof:yes'>объявление</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;
mso-no-proof:yes'> </span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>функции</span><span lang=EN-US style='font-size:12.0pt;
font-family:"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'> mult<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>{<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span></span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>return</span><span lang=EN-US style='font-size:12.0pt;
font-family:"Lucida Console";mso-no-proof:yes'> </span><span style='font-size:
12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>(</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;
mso-no-proof:yes'>m</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>1.</span><span lang=EN-US style='font-size:12.0pt;font-family:
"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>cost</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'> * </span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>m</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>1.</span><span lang=EN-US style='font-size:12.0pt;font-family:
"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>quant</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>); //
выполняется само умножение<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>}<o:p></o:p></span></p>

<p class=P><span style='font-family:"Book Antiqua";mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P style='margin-left:71.45pt;text-indent:-18.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 71.45pt'><![if !supportLists]><i style='mso-bidi-font-style:
normal'><span style='mso-no-proof:yes'><span style='mso-list:Ignore'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></i><![endif]><i
style='mso-bidi-font-style:normal'><span style='mso-no-proof:yes'>Передать
функции в качестве параметра указатель на структуру:<o:p></o:p></span></i></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>mult</span><span style='font-size:
12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>(&amp;</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>m</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>1); // функции </span><span lang=EN-US style='font-size:12.0pt;
font-family:"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>mult</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>
передаётся адрес<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'><span style='mso-spacerun:yes'>           </span>// структурной
переменной </span><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>m</span><span style='font-size:12.0pt;
font-family:"Lucida Console";mso-no-proof:yes'>1<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>...<o:p></o:p></span></p>

<p class=P><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>float</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'> </span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>mult</span><span style='font-size:12.0pt;font-family:
"Lucida Console";mso-no-proof:yes'>(</span><span lang=EN-US style='font-size:
12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>struct</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:
yes'> </span><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>base</span><span style='font-size:
12.0pt;font-family:"Lucida Console";mso-no-proof:yes'> *</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>p</span><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>)<span style='mso-spacerun:yes'>     </span>// объявление функции
</span><span lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";
mso-ansi-language:EN-US;mso-no-proof:yes'>mult</span><span style='font-size:
12.0pt;font-family:"Lucida Console";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>{<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span></span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>return</span><span style='font-size:12.0pt;font-family:
"Lucida Console";mso-no-proof:yes'> (</span><span lang=EN-US style='font-size:
12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>p</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>-&gt;</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>cost</span><span style='font-size:12.0pt;font-family:
"Lucida Console";mso-no-proof:yes'> * </span><span lang=EN-US style='font-size:
12.0pt;font-family:"Lucida Console";mso-ansi-language:EN-US;mso-no-proof:yes'>p</span><span
style='font-size:12.0pt;font-family:"Lucida Console";mso-no-proof:yes'>-&gt;</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Lucida Console";mso-ansi-language:
EN-US;mso-no-proof:yes'>quant</span><span style='font-size:12.0pt;font-family:
"Lucida Console";mso-no-proof:yes'>); // выполняется само умножение<o:p></o:p></span></p>

<p class=P><span style='font-size:12.0pt;font-family:"Lucida Console";
mso-no-proof:yes'>}<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Нужно помнить, что 3-й вариант
выполняется намного быстрее, особенно, когда структуры довольно громоздкие.<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Также необходимо помнить, что тип
аргумента функции должен соответствовать типу параметра.<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Точно таким же образом функции
передаётся массив структур. Путём передачи непосредственно самого массива
структур:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>struct</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>base</span> <span
class=SpellE>mas</span>[5]; // объявление массива структур,<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                    </span>// <span class=GramE>состоящего</span>
из 6-ти элементов<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>f1(<span
class=SpellE>mas</span>);<span style='mso-spacerun:yes'>   </span>// передача
функции f1 массива структур <span class=SpellE>mas</span><o:p></o:p></span></span></p>

<p class=P style='text-indent:72.0pt'><span class=Code><span style='font-size:
12.0pt'><!--[if gte vml 1]><v:shape id="_x0000_i1025" type="#_x0000_t75"
 style='width:175.5pt;height:24pt'>
 <v:imagedata src="8%20СТРУКТУРЫ%20ОБЪЕДИНЕНИЯ.files/image003.gif" o:title="99"/>
</v:shape><![endif]--><![if !vml]><img width=234 height=32
src="8%20СТРУКТУРЫ%20ОБЪЕДИНЕНИЯ.files/image003.gif" v:shapes="_x0000_i1025"><![endif]><o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span lang=EN-US
style='font-size:12.0pt;mso-ansi-language:EN-US'>f1(</span></span></span><span
class=SpellE><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>struct</span></span></span><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'> base <span
class=SpellE>mas</span>[])<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>...<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>mas</span></span><span class=GramE>[</span><span
class=SpellE>i</span>].n = 1;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span></span></span><span
class=Code><span style='font-size:12.0pt'>...<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>}<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Либо путём передачи функции указателя
на массив структур:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=GramE><span class=Code><span lang=EN-US
style='font-size:12.0pt;mso-ansi-language:EN-US'>f1(</span></span></span><span
class=SpellE><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>struct</span></span></span><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'> base *p)<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>...<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>(p + <span
class=SpellE>i</span>)-&gt;n = 1; // </span></span><span class=Code><span
style='font-size:12.0pt'>Можно</span></span><span class=Code><span
style='font-size:12.0pt;mso-ansi-language:EN-US'> </span></span><span
class=Code><span style='font-size:12.0pt'>также</span></span><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'> p[<span
class=SpellE>i</span>].n = 1<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>                 
</span></span></span><span class=Code><span style='font-size:12.0pt'>// или (*(<span
class=SpellE>p</span> + <span class=SpellE>i</span>)).<span class=SpellE>n</span>
= 1<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>...<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>}<o:p></o:p></span></span></p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272287"></a><a
name="_Toc265340327"></a><a name="_Toc263373098"><span style='mso-bookmark:
_Toc265340327'><span style='mso-bookmark:_Toc266272287'><span style='mso-ansi-language:
RU;mso-no-proof:yes'>8.7. Оператор </span><span lang=EN-US style='mso-no-proof:
yes'>typedef</span></span></span></a><span style='mso-bookmark:_Toc266272287'></span><span
style='mso-bookmark:_Toc265340327'></span><span style='mso-bookmark:_Toc263373098'></span><span
style='mso-ansi-language:RU;mso-no-proof:yes'><o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Используя ключевое слово </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-ansi-language:
EN-US;mso-no-proof:yes'>typedef</span><span style='mso-no-proof:yes'>,</span></i><span
style='mso-no-proof:yes'> </span>можно определять новые типы данных (точнее,
определять новое имя для уже существующего типа). Это может быть полезным при
обеспечении переносимости программ или для более удобного представления типов
данных.</p>

<p class=P>Общий вид <span style='mso-no-proof:yes'>оператора<span
style='mso-spacerun:yes'>  </span></span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-ansi-language:EN-US;mso-no-proof:yes'>typedef</span></i><span
style='mso-no-proof:yes'> такой:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>typedef</span></span></span><span
class=Code><span style='font-size:12.0pt'> тип <span class=SpellE>новое_имя_типа</span>;<o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P style='text-indent:0cm'><span style='mso-no-proof:yes'>где тип – имя
любого типа данных Си, а новое_имя_типа – новое имя этого типа, которое будет
использоваться совместно с этим типом данных.<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Например, если в коде программы по
ошибке вместо </span><span lang=EN-US style='mso-ansi-language:EN-US;
mso-no-proof:yes'>int</span><span style='mso-no-proof:yes'> написано </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-no-proof:yes'>integer</span><span
style='mso-no-proof:yes'>, можно решить эту проблему разными способами, в том
числе и следующим:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>typedef</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>int</span> <span
class=SpellE>integer</span>;<o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Однако нужно помнить, что новый тип данных не создаётся, а только
определяется новое имя для уже существующего типа.</p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272288"></a><a
name="_Toc265340328"></a><a name="_Toc263373099"><span style='mso-bookmark:
_Toc265340328'><span style='mso-bookmark:_Toc266272288'><span style='mso-ansi-language:
RU'>8.8. Поля</span></span></span></a><span style='mso-ansi-language:RU'> битов
в структурах<o:p></o:p></span></p>

<p class=P>Поля битов позволяют помещать, например, в ячейку памяти типа <span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>int</span></span>,
несколько различных переменных. Поле представляет собой набор смежных бит,
внутри одной переменной типа <span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>int</span></span>.</p>

<p class=P>Синтаксис определения и обработки полей базируется на структурах. В
общем виде определение поля следующее:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>тип имя<span
class=GramE> :</span> длина;<o:p></o:p></span></span></p>

<p class=P><i style='mso-bidi-font-style:normal'><o:p>&nbsp;</o:p></i></p>

<p class=P>Тип может быть <span lang=EN-US style='mso-ansi-language:EN-US'>signed</span><span
lang=EN-US> </span><span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>int</span></span><span lang=EN-US> </span>или <span lang=EN-US
style='mso-ansi-language:EN-US'>unsigned</span><span lang=EN-US> </span><span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>int</span></span>.
При этом каждому полю выделяется столько бит, сколько указано.</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=GramE><span class=Code><span
lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>struct</span></span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'><o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>unsigned</span> <span class=SpellE>int</span> pol:1;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>unsigned</span> m:1;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span></span></span><span
class=SpellE><span class=Code><span style='font-size:12.0pt'>int</span></span></span><span
class=Code><span style='font-size:12.0pt'> k:2;<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span style='font-size:12.0pt'>} <span
class=SpellE>stat</span>;</span></span></span><span class=Code><span
style='font-size:12.0pt'><o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P>Обращение<span style='mso-no-proof:yes'> к полям осуществляется
следующим образом<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><span style='mso-tab-count:1'>         </span><o:p></o:p></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>stat.pol</span></span></span><span
class=Code><span style='font-size:12.0pt'> = 0;<o:p></o:p></span></span></p>

<p class=P><span style='font-family:"Book Antiqua"'><o:p>&nbsp;</o:p></span></p>

<p class=P>Как и элемент структурной переменной, каждое поле доступно с помощью
оператора точка.</p>

<p class=P>Поля позволяют рационально использовать свободную память. Однако,
существуют и минусы их использования: невозможно получить адрес поля;
манипуляции с битовыми полями машинно-зависимы (например, в некоторых машинах
битовые поля могут пересекать границы машинного слова, тогда как в других
машинах это недопустимо); использование полей битов может привести к тому, что
компилятор будет генерировать машинный код, который выполняется с низкой
скоростью (приходится использовать дополнительные операции машинного языка для
получения доступа к отдельным частям адресуемых элементов памяти).</p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272289"></a><a
name="_Toc265340329"></a><a name="_Toc263373100"><span style='mso-bookmark:
_Toc265340329'><span style='mso-bookmark:_Toc266272289'><span style='mso-ansi-language:
RU'>8.9. Объединения</span></span></span></a><span style='mso-ansi-language:
RU'><o:p></o:p></span></p>

<p class=P>Объединение внешне напоминает структуры и может хранить в различные
моменты времени данные различного типа и размера. Как и для структур,
объявление объединения состоит <span class=GramE>из</span>:</p>

<p class=P style='margin-left:71.45pt;text-indent:-18.0pt;mso-list:l2 level1 lfo3;
tab-stops:list 71.45pt'><![if !supportLists]><span style='mso-list:Ignore'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>задание
шаблона объединения;</p>

<p class=P style='margin-left:71.45pt;text-indent:-18.0pt;mso-list:l2 level1 lfo3;
tab-stops:list 71.45pt'><![if !supportLists]><span style='mso-list:Ignore'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>объявление
переменной типа объединения.</p>

<p class=P>Объявление объединения начинается с ключевого слова <i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>union</span></i> и в общем случае выглядит следующим образом:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>union</span></span></span><span
class=Code><span style='font-size:12.0pt'> [<span class=SpellE>имя_типа_объединения</span>]<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>тип <span class=SpellE>имя_члена</span>;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>тип <span class=SpellE>имя_члена</span>;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>.<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>.<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>.<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>тип <span class=SpellE>имя_члена</span>;<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span style='font-size:12.0pt'>}
[одна или более переменных объединения];</span></span></span><span class=Code><span
style='font-size:12.0pt'><o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P><span style='mso-no-proof:yes'>Например</span><span lang=EN-US
style='mso-ansi-language:EN-US;mso-no-proof:yes'>:<o:p></o:p></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;mso-yfti-tbllook:480;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=235 valign=top style='width:176.4pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
  mso-ansi-language:EN-US'>union pole<o:p></o:p></span></span></p>
  <p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
  mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>
  <p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
  mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
  class=SpellE>int</span> n;<o:p></o:p></span></span></p>
  <p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
  mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>float m;<o:p></o:p></span></span></p>
  <p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
  mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>char s; <o:p></o:p></span></span></p>
  <p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
  mso-ansi-language:EN-US'>} <span class=SpellE>var</span>;</span></span><span
  lang=EN-US style='mso-ansi-language:EN-US;mso-no-proof:yes'><o:p></o:p></span></p>
  </td>
  <td width=451 valign=top style='width:338.4pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=P style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
  EN-US;mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="_x0000_i1027" type="#_x0000_t75"
   style='width:110.25pt;height:99pt'>
   <v:imagedata src="8%20СТРУКТУРЫ%20ОБЪЕДИНЕНИЯ.files/image004.gif" o:title="101"/>
  </v:shape><![endif]--><![if !vml]><img width=147 height=132
  src="8%20СТРУКТУРЫ%20ОБЪЕДИНЕНИЯ.files/image004.gif" v:shapes="_x0000_i1027"><![endif]><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=P><span lang=EN-US style='mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P>По сути, объединения – это структуры с нулевым смещением элементов
структуры относительно ее начала. Объем выделяемой памяти под объединение равен
размеру самого большого элемента в объединении.</p>

<p class=P>Доступ к членам объединения осуществляется с помощью оператора точка
(для получения доступа к объединению с помощью указателя используется оператор
стрелка<span class=GramE> -&gt;).</span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>var.m</span></span></span><span
class=Code><span style='font-size:12.0pt'> = 1;<span style='mso-spacerun:yes'> 
</span>// элементу <span class=SpellE>m</span> из <span class=SpellE>var</span>
присваивается значение 1<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span lang=EN-US
style='font-size:12.0pt;mso-ansi-language:EN-US'>void</span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
f1(union pole *p)<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>...<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span><span class=SpellE>p</span>-&gt;<span
class=SpellE>m</span> = 2; // элементу <span class=SpellE>m</span> из <span
class=SpellE>var</span> присваивается значение 2<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>  </span>...<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>}<o:p></o:p></span></span></p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P>Следует помнить, что, поскольку отдельные члены объединения
разделяют между собой одни и те же участки памяти, изменение одного из них
приводит к изменению остальных. Например, для приведённой структуры справедливо
следующее:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>var.m</span></span></span><span
class=Code><span style='font-size:12.0pt'> = 0; <span
style='mso-spacerun:yes'>  </span>// теперь все члены объединения равны 0<o:p></o:p></span></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>var.s</span></span></span><span
class=Code><span style='font-size:12.0pt'> = 65;<span
style='mso-spacerun:yes'>  </span>// после этого младший байт двух остальных<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>             </span>// членов объединения станет
равным 65, т.е.,<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>             </span>// например, при чтении <span
class=SpellE>var.n</span> получим тоже 65<o:p></o:p></span></span></p>

<p class=H2 style='mso-outline-level:3'><a name="_Toc266272290"></a><a
name="_Toc265340330"><span style='mso-bookmark:_Toc266272290'><span
style='mso-ansi-language:RU'>8.10. </span></span></a><a name="_Toc263373101"><span
style='mso-bookmark:_Toc266272290'><span style='mso-bookmark:_Toc265340330'><span
style='mso-ansi-language:RU'>Перечисления</span></span></span></a><span
style='mso-ansi-language:RU'><o:p></o:p></span></p>

<p class=P>Перечисляемый тип представляет собой упорядоченное множество
элементов, доступ к которым осуществляется по имени. Этот тип позволяет
улучшить читаемость текста программы.</p>

<p class=P>Синтаксис для задания данных переменных подобен синтаксису
объявления структурной переменной и в общем виде выглядит так:</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>enum</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>имя_типа_перечисл</span>
{<span class=SpellE>список_перечисл</span>} <span class=SpellE>список_переменных</span>;<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>enum</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>month</span>{<span
class=SpellE>Jan,Feb,Mar</span>,...};<span style='mso-spacerun:yes'>  
</span>// объявляется перечисление<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                               </span>// с именем <span
class=SpellE>month</span>, в <span class=GramE>фигурных</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                               </span>// скобках – <span
class=GramE>возможные</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>    </span><span
style='mso-spacerun:yes'>                           </span>// значения данной
переменной<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></span></p>

<p class=P><span class=SpellE><span class=Code><span style='font-size:12.0pt'>enum</span></span></span><span
class=Code><span style='font-size:12.0pt'> <span class=SpellE>month</span>
m1;<span style='mso-spacerun:yes'>                 </span>// m1 объявляется в
качестве<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'><span
style='mso-spacerun:yes'>                               </span>// переменной
типа <span class=SpellE>month</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>m1 = <span
class=SpellE>Jan</span>;<span style='mso-spacerun:yes'>                     
</span>// m1 присваивается <span class=SpellE>Jan</span><o:p></o:p></span></span></p>

<p class=P><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=P>Элементы списка, указанные в шаблоне, представляют собой константы,
которые обозначаются идентификатором. Им соответствуют неявно значения, начиная
с 0, с последующим увеличением на 1. Выражение в шаблоне можно
проинициализировать, т.е. назначить отдельному элементу перечисления явно
какое-либо значение.</p>

<p class=P>Число байт, отводимое под переменную перечисления, зависит от
количества и значений констант в шаблоне.</p>

<p class=P>Если все значения констант могут быть представлены значениями типа <span
lang=EN-US style='mso-ansi-language:EN-US'>unsigned</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>char</span>, то под переменную <span
lang=EN-US style='mso-ansi-language:EN-US'>m</span>1 отведется 1 байт, если не
хватает – 2 байта.</p>

<p class=P>Имя переменной может использоваться в выражениях, например</p>

<p class=P><o:p>&nbsp;</o:p></p>

<p class=P><span class=GramE><span class=Code><span lang=EN-US
style='font-size:12.0pt;mso-ansi-language:EN-US'>if</span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'>
((m1 &lt; Mar) || (m1 &gt; Nov))<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE><span class=GramE>printf</span></span><span class=GramE>(</span>“Winter”);<o:p></o:p></span></span></p>

<p class=P><span class=GramE><span class=Code><span lang=EN-US
style='font-size:12.0pt;mso-ansi-language:EN-US'>else</span></span></span><span
class=Code><span lang=EN-US style='font-size:12.0pt;mso-ansi-language:EN-US'><o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>if</span> (m1 &lt; Jun)<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>    </span><span
class=SpellE><span class=GramE>printf</span></span><span class=GramE>(</span>“Spring”);<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=GramE>else</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>    </span><span
class=GramE>if</span> (m1 &lt; Sep)<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>      </span><span
class=SpellE><span class=GramE>printf</span></span><span class=GramE>(</span>“Summer”);<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>    </span><span
class=GramE>else</span><o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>      </span><span
class=SpellE><span class=GramE>printf</span></span><span class=GramE>(</span>“Autumn”);<o:p></o:p></span></span></p>

<p class=P><span class=Code><span lang=EN-US style='font-size:12.0pt;
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span></span></span><span
class=Code><span style='font-size:12.0pt'>}<o:p></o:p></span></span></p>

<p class=P><span class=Code><span style='font-size:12.0pt'>}<o:p></o:p></span></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>
